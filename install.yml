---
- name: set up sources
  hosts: all
  tags: casks
  sudo: false
  tasks:
  - name: get homebrew taps setup
    homebrew_tap: tap={{ item }} state=present
    check_mode: no
    with_items:
      - caskroom/cask
      - caskroom/drivers
      - homebrew/binary
      - homebrew/versions

- name: essential tools for shell environment
  hosts: all
  tags: essential
  sudo: false
  tasks:
  - name: install essential shell brews
    homebrew: name={{ item }} state=present
    with_items:
      - git
      - hub
      - ssh-copy-id
      - imagemagick

  - name: remove legacy shell brews
    homebrew: name={{ item }} state=absent
    with_items:
      - gh #gh is now hub

  - name: install essential shell casks
    homebrew_cask: name={{ item }} state=present
    with_items:
      - xquartz


- name: Programming languages and environment platforms
  hosts: all
  tasks:
    #- include: tasks/go.yml      tags=go
    #  vars:
    #    gopath: ~/src/go

    - include: tasks/node.yml    tags=node
      vars:
        global_modules:
          - doctoc
          - ember-cli
        node_versions:
          - 4.3.2
          - 8.9.0

    - include: tasks/ruby.yml    tags=ruby
      vars:
        global_ruby: 2.3.5
        default_gems:
          - bundler
        rubies:
          - 2.3.5

    - name: install various libraries with pip
      pip: name={{item}} state=present
      with_items:
        - virtualenv
        - flake8

- name: Applications and tools
  hosts: all
  tasks:
  - name: install brewcask applications
    tags: casks
    homebrew_cask: state=present name={{ item }}
    with_items:
      # webdevs need all the webs (except opera lol)
      - google-chrome
      - firefox
      # text editors i hate the least
      - atom
      - sublime-text
      # javaaaaaa
      - intellij-idea-ce
      # virtual machine management
      - vagrant
      - virtualbox
      # other dev tools
      - iterm2
      - qlmarkdown
      - quicklook-json
      # analyst monster
      - sqlworkbenchj
      # non-dev stuff for general productivity
      - istat-menus5
      # - bartender
      - divvy
      - hammerspoon
      - 1password
      - qbserve
      # non-dev stuff for general unproductivity
      # - charles
      # - cloak
      - spotify
      # - sonos
      # - boom

  - name: install homebrew tools
    tags: brews
    homebrew: state=present name={{ item }}
    with_items:
      # dev tools
      - jq
      - python3
      - wget
      - s3cmd
      - awscli
